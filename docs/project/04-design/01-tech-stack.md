# テックスタック

<!--
何を書くか: プロジェクトで使用する技術・ツール・ライブラリの一覧

目的:
  - 技術選定の透明性を確保
  - チームメンバーの学習計画を支援
  - 技術的負債の可視化
  - セキュリティパッチやバージョンアップの計画
  - 新規メンバーのオンボーディング資料

重要性:
  - アーキテクチャ決定の記録（ADR: Architecture Decision Record）の一部
  - 技術選定の理由を明確化（なぜその技術を選んだか）
  - 互換性や依存関係の管理
  - ライセンスコンプライアンス

記載のポイント:
  - レイヤーごとに整理（フロントエンド、バックエンド、インフラなど）
  - バージョンを明記（メジャーバージョンは必須）
  - 選定理由をメモ欄に記載
  - EOL（End of Life）を考慮

更新頻度:
  - プロジェクト初期に作成
  - 新しい技術を導入する際に更新
  - バージョンアップ時に更新
  - 四半期ごとに見直し（セキュリティ、EOL確認）
-->

---

## プロジェクト方針

**タイプ**: デモアプリケーション  
**重視点**: シンプルさ、低コスト、迅速な開発  
**スケール**: 小規模（同時利用2-3人）  
**データ永続化**: なし（インメモリのみ）

### 設計原則
- **最小構成**: 必要最小限の技術スタックで構成
- **統合優先**: フロントエンドとバックエンドを統合（Next.js）
- **保守性**: TypeScriptによる型安全性確保
- **低コスト**: オープンソース技術を優先、無料/低額サービスを選択

---

## テックスタック一覧

| レイヤー | 技術/ツール | バージョン | 選定タイミング | メモ |
|----------|------------|-----------|--------------|------|
| **フロントエンド** | Next.js | 14.x | 初期 | フロントエンド+バックエンド統合。App Router使用。SSR/SSG対応 |
| フロントエンド | React | 18.x | 初期 | Next.jsに含まれる。コンポーネントベース開発 |
| フロントエンド | TypeScript | 5.x | 初期 | 型安全性、開発効率向上。フロント・バック共通 |
| フロントエンド | Tailwind CSS | 3.x | 初期 | レスポンシブデザイン迅速実装。ユーティリティクラス |
| **バックエンド** | Next.js API Routes | - | 初期 | フロントエンドと統一。別サービス不要 |
| バックエンド | Node.js | 20.x LTS | 初期 | 2026年4月までサポート。Next.jsランタイム |
| **データベース** | なし | - | - | インメモリのみ。永続化不要（要件により） |
| **API連携** | fetch (組み込み) | - | 初期 | Wikipedia API、OpenAI API呼び出し。追加ライブラリ不要 |
| **インフラ** | Railway | - | 初期 | 要件で指定。Git push自動デプロイ。環境変数管理 |
| インフラ | Docker | 不要 | - | RailwayがNode.js自動検出。コンテナ化不要 |
| **CI/CD** | GitHub Actions | - | 初期 | リンター、型チェック、テスト実行 |
| CI/CD | GitHub | - | 初期 | ソースコード管理、issue tracking |
| **監視** | Railway Logs | - | 初期 | 基本的なログ確認。標準出力に記録 |
| 監視 | Sentry | - | 不要 | デモのため、エラートラッキング不要 |
| **テスト** | Vitest | 1.x | 初期 | 軽量、高速。重要機能のみテスト |
| テスト | React Testing Library | 14.x | 初期 | コンポーネントテスト |
| **開発ツール** | ESLint | 8.x | 初期 | コード品質。Next.js標準設定 |
| 開発ツール | Prettier | 3.x | 初期 | コードフォーマッター。一貫性確保 |
| **状態管理** | React Context API | - | 初期 | セッション管理のみ。追加ライブラリ不要 |
| **フォーム** | React Hook Form | 7.x | 初期 | バリデーション、エラーハンドリング |
| **UIコンポーネント** | shadcn/ui | - | 初期 | Tailwindベース。カスタマイズ容易 |
| **認証** | カスタム実装 | - | 初期 | ベーシック認証のみ。ライブラリ不要 |
| **セキュリティ** | 環境変数 | - | 初期 | APIキー、パスワード管理。.env.local使用 |

---

## 技術選定の理由

### Next.js（統合フレームワーク）

**選定理由**:
- フロントエンドとバックエンドを統合し、シンプルな構成を実現
- Railwayでの単一デプロイで低コスト・低複雑性
- SSR/SSGで静的ページ1秒以内（非機能要件）を達成
- API Routesで2-3人同時接続に十分対応

**代替案と却下理由**:
- Vite + Express: フロント・バック分離で複雑化、デモには過剰
- Remix: Next.jsと同等だが、エコシステムがやや小さい

### TypeScript

**選定理由**:
- 型安全性により開発効率向上、バグ削減
- Next.jsとの親和性が高い
- フロント・バック共通言語で学習コスト削減

**代替案と却下理由**:
- JavaScript: 型エラーのリスク、保守性低下

### Tailwind CSS

**選定理由**:
- レスポンシブデザイン（PC、スマホ、タブレット）を迅速実装
- ユーティリティクラスで開発速度向上
- Next.jsとの統合が容易

**代替案と却下理由**:
- CSS Modules: Tailwindより開発速度が遅い
- Styled Components: ランタイムコスト、デモには過剰

### データベースなし

**選定理由**:
- 要件で「学習履歴の永続化なし」と明記
- インメモリで十分（セッションごと1-5KB）
- コスト削減、構成のシンプル化

**将来拡張時の候補**:
- SQLite: ファイルベース、セットアップ不要
- PostgreSQL on Railway: Railwayサポート、スケーラビリティ

###Railway

**選定理由**:
- 要件で指定
- Git push自動デプロイで迅速な開発サイクル
- 環境変数管理が簡単（APIキー、パスワード）
- 月額$5-10で低コスト

**補足**:
- Dockerコンテナ化不要（Railwayが自動検出）
- IaC不要（シンプルな構成）

### Vitest + React Testing Library

**選定理由**:
- デモ用途のため、軽量なテスト環境
- Vitestは高速実行
- 重要な機能のみテスト（認証、API呼び出し、○×回答ロジック）

**代替案と却下理由**:
- Jest: Vitestより遅い
- Playwright: E2Eテスト、デモには過剰

---

## 依存関係とバージョン管理

### Node.js LTSポリシー
- **Node.js 20.x LTS**: 2026年4月までサポート
- プロジェクト期間中のサポート保証

### パッケージマネージャー
- **npm**: Node.js標準。追加ツール不要
- package-lock.jsonでバージョン固定

### セキュリティアップデート
- `npm audit` で脆弱性チェック
- GitHub Dependabot でPR自動作成

---

## 開発環境

| 項目 | 推奨 | メモ |
|------|------|------|
| IDE | Visual Studio Code | TypeScript、ESLint、Prettierサポート |
| Node.js | 20.x LTS | nvm推奨（バージョン管理） |
| ブラウザ | Chrome/Firefox/Safari最新版 | 非機能要件に準拠 |
| OS | Windows/macOS/Linux | クロスプラットフォーム |

---

## 外部サービス

| サービス | 用途 | 料金 |
|---------|------|------|
| Wikipedia API | 記事テキスト取得 | 無料 |
| OpenAI API | サマリ・○×問題生成 | 月額$10-50（使用量による） |
| Railway | デプロイ・ホスティング | 月額$5-10 |
| GitHub | ソースコード管理、CI/CD | 無料（パブリックリポジトリ） |

**合計コスト**: 月額$15-60

---

## 採用しない技術（デモ簡略化のため）

| 技術 | 理由 |
|------|------|
| Redux/Zustand | セッション管理のみでContext APIで十分 |
| GraphQL | REST APIで十分、デモには過剰 |
| Docker | Railwayが自動検出、手動構築不要 |
| Kubernetes | スケール不要（2-3人同時） |
| Microservices | モノリスで十分、デモには過剰 |
| PostgreSQL/MySQL | データ永続化不要 |
| Redis | キャッシュ不要（小規模） |
| WebSocket | リアルタイム通信不要 |
| Sentry | デモのため、シンプルなログで十分 |
| Auth0/Clerk | ベーシック認証のみ、カスタム実装 |

---

## 今後の拡張性

将来的に以下の機能を追加する場合の技術候補：

| 拡張機能 | 推奨技術 |
|---------|---------|
| ユーザー管理 | NextAuth.js、Clerk |
| 学習履歴永続化 | PostgreSQL on Railway、Prisma ORM |
| リアルタイム通知 | Server-Sent Events、WebSocket |
| 高度な監視 | Sentry、Datadog |
| 多言語対応 | next-i18next |
| モバイルアプリ | React Native（コード共有） |

---

## メモ

### 変更履歴
- 2025-11-22: 初版作成

### 次のアクション
- `/a-008-DefineRepositoryStructure` でディレクトリ構造定義
- Next.jsプロジェクト初期化（`npx create-next-app@latest`）
- Railwayプロジェクト作成

### 注意事項
- 本スタックはデモ用途に最適化されており、本番環境では追加の考慮が必要
- スケール要件が変わった場合は、データベース・キャッシュの導入を検討
