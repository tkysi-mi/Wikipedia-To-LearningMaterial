# タスク定義ドキュメント

<!--
このドキュメントについて:
  - 格納場所: docs/tasks/task000002-define-api-spec/a-definition.md
  - 作成方法: /b-001-CreateTaskDefinition ワークフローで作成
  - 関連ドキュメント:
    - b-research.md (リサーチドキュメント)
    - c-implementation.md (実装タスクリスト)
-->

---

## 1. 目的

| 項目 | 内容 |
|------|------|
| 解決する問題 | フロントエンドとバックエンドの実装を進めるにあたり、明確な通信規約（API仕様）が存在しないため、並行開発や結合が困難である。 |
| 提供する価値 | ドメインモデルに基づいたREST API仕様を策定することで、フロントエンド・バックエンド間のインターフェースを確定させ、スムーズな実装と結合を可能にする。 |

---

## 2. ユーザーストーリー一覧

| ID | ユーザーストーリー | 優先度 | 備考 |
|----|-------------------|--------|------|
| US-001 | 社会人（自習者）として、WikipediaのURLを入力して、その記事のサマリと○×問題を生成したい | High | `POST /api/materials` |
| US-003 | 社会人（自習者）として、生成された○×問題に回答して、即座に正解・不正解を知りたい | High | `POST /api/sessions/{id}/answers` |
| US-005 | 社会人（自習者）として、全問回答後に学習結果（正答数）を確認したい | High | `GET /api/sessions/{id}/result` |
| US-007 | 社会人（自習者）として、パスワード認証を行い、許可されたユーザーのみが利用できるようにしたい | High | `POST /api/auth/login` |

---

## 3. 受け入れ基準

| ID | 受け入れ基準 | 検証方法 |
|----|-------------|---------|
| AC-001 | ドメインモデルのすべてのCommandとQueryをカバーするAPIエンドポイントが定義されている | 仕様書とドメインモデルの突合 |
| AC-002 | リクエストとレスポンスのデータ構造（JSONスキーマ）が明確になっている | 仕様書の確認 |
| AC-003 | エラーハンドリング（4xx, 5xx）とステータスコードのルールが定義されている | 仕様書の確認 |
| AC-004 | `docs/project/04-design/05-api-spec.md` が作成されている | ファイル存在確認 |

---

## 4. 影響範囲

| コンポーネント | 影響内容 |
|---------------|----------|
| フロントエンド | APIクライアントの実装、型定義の作成に影響 |
| バックエンド | API Routeハンドラーの実装、バリデーションロジックに影響 |
| ドキュメント | `docs/project/04-design/05-api-spec.md` の新規作成 |

---

## 5. 前提条件・制約事項

- `docs/project/03-domain/01-domain-model.md` が完了していること。
- `docs/project/04-design/01-tech-stack.md` で Next.js API Routes の使用が決定していること。
- データベースは使用せず、インメモリで状態を管理する（デモ用途）。
