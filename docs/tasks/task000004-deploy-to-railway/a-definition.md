# タスク定義ドキュメント

<!--
このドキュメントについて:
  - 格納場所: docs/tasks/task000004-deploy-to-railway/a-definition.md
  - 作成方法: /b-001-CreateTaskDefinition ワークフローで作成
  - 関連ドキュメント:
    - b-research.md (リサーチドキュメント)
    - c-implementation.md (実装タスクリスト)
-->

---

## 1. 目的

| 項目         | 内容                                                                                                                                                          |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 解決する問題 | アプリケーションがローカル環境でしか動作しておらず、外部からアクセスできない。                                                                                |
| 提供する価値 | アプリケーションを Railway にデプロイすることで、インターネット経由でどこからでもアクセス可能にする。これにより、実際の利用シーンでの検証やデモが可能になる。 |

---

## 2. ユーザーストーリー一覧

| ストーリーID | ユーザーストーリー                                                                                                                                |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| US-001       | ユーザーとして、Webブラウザからアプリケーションの公開URLにアクセスしたい。なぜなら、ローカル環境を構築せずにアプリを利用したいから。              |
| US-002       | 開発者として、Railway上で環境変数（OpenAI API Keyなど）を安全に管理したい。なぜなら、セキュリティを維持しつつ本番環境を動作させる必要があるから。 |
| US-003       | 開発者として、簡単なコマンドまたは自動連携でデプロイしたい。なぜなら、デプロイの手間を減らして開発に集中したいから。                              |

---

## 3. 変更内容一覧

| カテゴリ     | 変更内容                                                                                                              |
| ------------ | --------------------------------------------------------------------------------------------------------------------- |
| インフラ     | Railway プロジェクトの新規作成、サービス作成、環境変数設定 (`AUTH_PASSWORD`, `OPENAI_API_KEY`, `NEXT_PUBLIC_APP_URL`) |
| 設定         | `package.json` の `start` スクリプト確認（必要であればポート設定への対応）                                            |
| ドキュメント | デプロイ手順書の作成（または `README.md` への追記）                                                                   |

---

## 4. 受け入れ基準

- [ ] Railway 上でアプリケーションがビルド・デプロイされ、Running 状態になること
- [ ] 発行された公開 URL にアクセスし、ログイン画面が表示されること
- [ ] 正しいパスワードでログインできること
- [ ] Wikipedia の URL を入力して教材生成が正常に完了すること
- [ ] 生成されたクイズが正常に動作すること
- [ ] 日本語 UI が正しく表示されること（文字化け等がないこと）

---

## メモ

- **前提条件**: Railway アカウントが必要。Railway CLI がインストールされ、ログイン済みであること。
- **環境変数**:
  - `AUTH_PASSWORD`: ログイン用パスワード
  - `OPENAI_API_KEY`: OpenAI API キー
  - `NEXT_PUBLIC_APP_URL`: 本番環境の URL（デプロイ後に確定）
  - `NPM_FLAGS`: `--legacy-peer-deps` (必要であれば)
- **注意**: Next.js の Standalone モードや Output File Tracing の設定が必要か確認する（通常はデフォルトで動作するが、Railway の推奨構成を確認）。
